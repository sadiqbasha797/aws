<div class="min-h-screen bg-gray-50 p-6">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <div class="flex items-center space-x-3">
        <div class="flex items-center justify-center w-12 h-12 bg-orange-500 rounded-lg">
          <i class="fas fa-chart-line text-white text-xl"></i>
        </div>
        <div>
          <h1 class="text-3xl font-bold text-gray-900">Dashboard</h1>
          <p class="text-gray-600 mt-1">Welcome to your AWS Management Console</p>
        </div>
      </div>
      <div class="flex items-center space-x-4">
        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
          <span class="w-2 h-2 bg-green-400 rounded-full mr-2"></span>
          System Online
        </span>
        <div class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm font-medium">
          <i class="fas fa-user-tag mr-1"></i>
          Dashboard
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center py-20">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"></div>
    <p class="text-gray-600 mt-4">Loading dashboard...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="bg-red-50 border border-red-200 rounded-lg p-4">
    <p class="text-red-800">{{ error }}</p>
    <button (click)="loadDashboardData()" class="mt-2 text-sm text-red-600 hover:text-red-800 underline">
      Retry
    </button>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading && stats">
    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
      <!-- Total SOPs -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-orange-200 transition-all duration-200 cursor-pointer p-6 w-full" (click)="navigateToSOPs()">
        <div class="flex items-center">
          <div class="p-3 bg-orange-100 rounded-lg">
            <i class="fas fa-file-alt text-orange-600 text-xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600">Total SOPs</p>
            <p class="text-2xl font-semibold text-gray-900">{{ stats.sops.total }}</p>
            <p class="text-xs text-gray-500 mt-1">{{ stats.sops.active }} active</p>
          </div>
        </div>
      </div>

      <!-- Team Members -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-orange-200 transition-all duration-200 cursor-pointer p-6 w-full" (click)="navigateToTeamManagement()">
        <div class="flex items-center">
          <div class="p-3 bg-blue-100 rounded-lg">
            <i class="fas fa-users text-blue-600 text-xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600">Team Members</p>
            <p class="text-2xl font-semibold text-gray-900">{{ stats.teamMembers.total }}</p>
            <p class="text-xs text-gray-500 mt-1">{{ stats.teamMembers.active }} active</p>
          </div>
        </div>
      </div>

      <!-- Average Productivity -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-orange-200 transition-all duration-200 cursor-pointer p-6 w-full" (click)="navigateToProductivity()">
        <div class="flex items-center">
          <div class="p-3 bg-green-100 rounded-lg">
            <i class="fas fa-bolt text-green-600 text-xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600">Avg Productivity</p>
            <p class="text-2xl font-semibold text-gray-900">{{ stats.productivity.avgProductivity | number:'1.1-1' }}%</p>
            <p class="text-xs text-gray-500 mt-1">{{ stats.productivity.totalRecords }} records</p>
          </div>
        </div>
      </div>

      <!-- Average Reliability -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-orange-200 transition-all duration-200 cursor-pointer p-6 w-full" (click)="navigateToReliability()">
        <div class="flex items-center">
          <div class="p-3 bg-purple-100 rounded-lg">
            <i class="fas fa-check-circle text-purple-600 text-xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600">Avg Reliability</p>
            <p class="text-2xl font-semibold text-gray-900">{{ stats.reliability.avgReliabilityScore | number:'1.1-1' }}%</p>
            <p class="text-xs text-gray-500 mt-1">{{ stats.reliability.totalRecords }} records</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Manager Stats (if manager) -->
    <div *ngIf="stats.managerStats" class="mb-6">
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">My Statistics</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
          <div>
            <p class="text-sm text-gray-600">My SOPs</p>
            <p class="text-xl font-semibold text-gray-900">{{ stats.managerStats.mySOPs }}</p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Productivity Records</p>
            <p class="text-xl font-semibold text-gray-900">{{ stats.managerStats.productivityRecords }}</p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Avg Productivity</p>
            <p class="text-xl font-semibold text-gray-900">{{ stats.managerStats.avgProductivity | number:'1.1-1' }}%</p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Reliability Workers</p>
            <p class="text-xl font-semibold text-gray-900">{{ stats.managerStats.reliabilityWorkers }}</p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Avg Reliability</p>
            <p class="text-xl font-semibold text-gray-900">{{ stats.managerStats.avgReliability | number:'1.1-1' }}%</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Recent Activity -->
      <div class="lg:col-span-2">
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-lg font-semibold text-gray-900">Recent Activity</h3>
            <button (click)="loadDashboardData()" class="text-sm text-orange-600 hover:text-orange-500 font-medium transition-colors duration-200">
              <i class="fas fa-sync-alt mr-1"></i>
              Refresh
            </button>
          </div>
          <div *ngIf="activities.length === 0" class="text-center py-8">
            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-inbox text-gray-400 text-2xl"></i>
            </div>
            <p class="text-gray-500">No recent activities</p>
          </div>
          <div *ngIf="activities.length > 0" class="space-y-4">
            <div *ngFor="let activity of activities" class="flex items-center space-x-4 pb-4 border-b border-gray-100 last:border-0">
              <div [ngClass]="{
                'bg-orange-100': activity.color === 'orange',
                'bg-blue-100': activity.color === 'blue',
                'bg-green-100': activity.color === 'green',
                'bg-purple-100': activity.color === 'purple'
              }" class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0">
                <i [ngClass]="{
                  'text-orange-600': activity.color === 'orange',
                  'text-blue-600': activity.color === 'blue',
                  'text-green-600': activity.color === 'green',
                  'text-purple-600': activity.color === 'purple',
                  'fa-file-alt': activity.icon === 'document',
                  'fa-edit': activity.icon === 'edit',
                  'fa-user': activity.icon === 'user',
                  'fa-clock': activity.icon === 'clock'
                }" class="fas text-lg"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-gray-900 truncate">{{ activity.title }}</p>
                <p class="text-sm text-gray-500 truncate">{{ activity.description }}</p>
                <p class="text-xs text-gray-400 mt-1">{{ formatDate(activity.timestamp) }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="space-y-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-6">Quick Actions</h3>
          <div class="space-y-3">
            <button (click)="navigateToCreateSOP()" class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 hover:border-orange-300 transition-all duration-200">
              <i class="fas fa-plus mr-2"></i>
              Create New SOP
            </button>
            <button (click)="navigateToTeamManagement()" class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 hover:border-orange-300 transition-all duration-200">
              <i class="fas fa-users mr-2"></i>
              Manage Team
            </button>
            <button (click)="navigateToProductivity()" class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 hover:border-orange-300 transition-all duration-200">
              <i class="fas fa-bolt mr-2"></i>
              View Productivity
            </button>
            <button (click)="navigateToReliability()" class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 hover:border-orange-300 transition-all duration-200">
              <i class="fas fa-check-circle mr-2"></i>
              View Reliability
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
