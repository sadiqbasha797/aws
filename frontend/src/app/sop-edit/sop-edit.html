<div class="min-h-screen bg-gray-50">
  <!-- Loading State -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center py-20">
    <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500"></div>
    <p class="text-gray-600 mt-4 text-lg">Loading SOP...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="p-6">
    <div class="max-w-2xl mx-auto">
      <div class="bg-red-50 border border-red-200 rounded-xl p-8 text-center">
        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
        </div>
        <h3 class="text-xl font-semibold text-red-800 mb-2">Error Loading SOP</h3>
        <p class="text-red-600 mb-6">{{ error }}</p>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <button 
            (click)="goBack()"
            class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2">
            <i class="fas fa-arrow-left"></i>
            <span>Go Back</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Form -->
  <div *ngIf="sop && !loading && !error" class="p-6">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="mb-8">
        <button 
          (click)="goBack()"
          class="mb-4 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2">
          <i class="fas fa-arrow-left"></i>
          <span>Back to SOP</span>
        </button>
        
        <div class="flex items-center gap-4 mb-6">
          <div class="flex items-center justify-center w-16 h-16 bg-orange-500 rounded-xl flex-shrink-0">
            <i class="fas fa-edit text-white text-2xl"></i>
          </div>
          <div>
            <h1 class="text-3xl font-bold text-gray-900">Edit SOP</h1>
            <p class="text-gray-600 mt-1">Update the details of this Standard Operating Procedure</p>
          </div>
        </div>
      </div>

      <!-- Form -->
      <form (ngSubmit)="onSubmit()" class="space-y-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
          <!-- Title -->
          <div class="mb-6">
            <label for="title" class="block text-sm font-semibold text-gray-700 mb-2">
              Title <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              id="title"
              name="title"
              [(ngModel)]="formData.title"
              required
              maxlength="200"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors duration-200"
              placeholder="Enter SOP title">
          </div>

          <!-- Description -->
          <div class="mb-6">
            <label for="description" class="block text-sm font-semibold text-gray-700 mb-2">
              Description
            </label>
            <textarea
              id="description"
              name="description"
              [(ngModel)]="formData.description"
              rows="4"
              maxlength="1000"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors duration-200 resize-vertical"
              placeholder="Provide a brief description of this SOP"></textarea>
          </div>

          <!-- Process -->
          <div class="mb-6">
            <label for="process" class="block text-sm font-semibold text-gray-700 mb-2">
              Process Details
            </label>
            <textarea
              id="process"
              name="process"
              [(ngModel)]="formData.process"
              rows="6"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors duration-200 resize-vertical"
              placeholder="Describe the detailed process or procedure"></textarea>
          </div>

          <!-- Tags -->
          <div class="mb-6">
            <label for="tags" class="block text-sm font-semibold text-gray-700 mb-2">
              Tags
            </label>
            <input
              type="text"
              id="tags"
              name="tags"
              [(ngModel)]="formData.tags"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors duration-200"
              placeholder="Enter tags separated by commas (e.g., safety, quality, training)">
            <p class="text-sm text-gray-500 mt-1">Separate multiple tags with commas</p>
          </div>

          <!-- Status -->
          <div class="mb-6">
            <label for="status" class="block text-sm font-semibold text-gray-700 mb-2">
              Status
            </label>
            <select
              id="status"
              name="status"
              [(ngModel)]="formData.status"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors duration-200">
              <option value="draft">Draft</option>
              <option value="active">Active</option>
              <option value="archived">Archived</option>
            </select>
          </div>

          <!-- Error Message -->
          <div *ngIf="saveError" class="mb-6">
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
              <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-600 mr-2"></i>
                <span class="text-red-700 font-medium">{{ saveError }}</span>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="flex flex-col sm:flex-row gap-3 justify-end pt-6 border-t border-gray-200">
            <button
              type="button"
              (click)="cancel()"
              class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors duration-200 flex items-center justify-center space-x-2">
              <i class="fas fa-times"></i>
              <span>Cancel</span>
            </button>
            <button
              type="submit"
              [disabled]="saving || !formData.title || !formData.title.trim()"
              class="px-6 py-3 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2">
              <i *ngIf="!saving" class="fas fa-save"></i>
              <div *ngIf="saving" class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
              <span>{{ saving ? 'Saving...' : 'Save Changes' }}</span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
